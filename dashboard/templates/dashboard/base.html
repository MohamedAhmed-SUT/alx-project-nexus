<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}E-Commerce Dashboard{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --dark-color: #1e293b;
            --light-color: #f8fafc;
            --border-radius: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {margin:0; padding:0; box-sizing:border-box;}
        body {
            font-family:'Inter', sans-serif;
            background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            min-height:100vh;
            color:#334155;
            padding-top: 6rem;   
        }

        .navbar {
            background: rgba(30, 41, 59, 0.95) !important;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            box-shadow: var(--box-shadow);
            
        }
        .navbar-brand {
            font-weight:700; font-size:1.5rem;
            background: linear-gradient(45deg,#3b82f6,#8b5cf6);
            -webkit-background-clip:text; background-clip:text;
            -webkit-text-fill-color:transparent;
        }
        .nav-link {font-weight:500; transition: var(--transition); position: relative;}
        .nav-link:hover {color:#3b82f6 !important; transform: translateY(-1px);}
        .nav-link::after {
            content:''; position:absolute; width:0; height:2px; bottom:-5px; left:50%;
            background:linear-gradient(45deg,#3b82f6,#8b5cf6);
            transition: var(--transition); transform:translateX(-50%);
        }
        .nav-link:hover::after {width:80%;}

        
        .dropdown-menu {
            z-index: 2000 !important;
        }

        .main-container {background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-radius: var(--border-radius); box-shadow: var(--box-shadow); margin: 2rem auto; padding:2rem; max-width:1400px;}
        .card {border:none; border-radius: var(--border-radius); box-shadow: var(--box-shadow); transition: var(--transition); overflow:hidden;}
        .card:hover {transform: translateY(-5px); box-shadow:0 10px 25px -5px rgba(0,0,0,0.2);}
        .btn {border-radius:8px; font-weight:500; transition: var(--transition); border:none; position:relative; overflow:hidden;}
        .btn::before {content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent); transition:left 0.5s;}
        .btn:hover::before {left:100%;}
        .btn-primary {background:linear-gradient(45deg,#3b82f6,#1d4ed8);}
        .btn-success {background:linear-gradient(45deg,#10b981,#059669);}
        .btn-warning {background:linear-gradient(45deg,#f59e0b,#d97706);}
        .btn-danger {background:linear-gradient(45deg,#ef4444,#dc2626);}

        .table {background:white; border-radius: var(--border-radius); overflow:hidden; box-shadow: var(--box-shadow);}
        .table th {background: linear-gradient(45deg,#1e293b,#334155); color:white; font-weight:600; border:none; padding:1rem;}
        .table td {padding:1rem; vertical-align:middle; border-color:#e2e8f0;}
        .table tbody tr {transition: var(--transition);}
        .table tbody tr:hover {background-color:#f8fafc; transform:scale(1.01);}

        .form-control, .form-select {border-radius:8px; border:2px solid #e2e8f0; transition:var(--transition); padding:0.75rem 1rem;}
        .form-control:focus, .form-select:focus {border-color:#3b82f6; box-shadow:0 0 0 3px rgba(59,130,246,0.1); transform:translateY(-1px);}

        .fade-in {animation:fadeIn 0.6s ease-out;}
        @keyframes fadeIn {from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);}}

        .slide-in {animation:slideIn 0.5s ease-out;}
        @keyframes slideIn {from {opacity:0; transform:translateX(-20px);} to {opacity:1; transform:translateX(0);}}

        @media(max-width:768px){
            .main-container{margin:1rem; padding:1rem;}
            .navbar-brand{font-size:1.2rem;}
            .card{margin-bottom:1rem;}
            .navbar-nav .dropdown-menu{position:absolute; right:0; left:auto;}
        }

        .spinner {display:none; width:20px; height:20px; border:2px solid #f3f3f3; border-top:2px solid #3b82f6; border-radius:50%; animation:spin 1s linear infinite;}
        @keyframes spin {0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);}}

        .toast {border-radius: var(--border-radius); box-shadow: var(--box-shadow);}
        .stat-card {text-align:center; padding:1.5rem;}
        .stat-number {font-size:2.5rem; font-weight:700; margin:0.5rem 0;}
        .stat-icon {font-size:2rem; margin-bottom:1rem;}

        
        .modal.fade .modal-dialog {display: flex; align-items: center; justify-content: center; min-height: 150vh; transition: transform 0.3s ease-out;}
        .modal-content {background: #ffffff !important; border-radius: 16px; border: none; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08); color: #1f2937; padding: 1rem 1.5rem;}
        .modal-header {border-bottom: 1px solid #f1f5f9; background: #f9fafb; border-radius: 16px 16px 0 0;}
        .modal-footer {border-top: 1px solid #f1f5f9; background: #f9fafb; border-radius: 0 0 16px 16px;}
        .btn-close {filter: brightness(0.5);}
        .btn-close:hover {filter: brightness(0.2);}
        .modal-backdrop.show {opacity: 0.6 !important; background-color: #000 !important;}
        .modal.fade .modal-dialog {transform: translateY(-30px); opacity: 0;}
        .modal.show .modal-dialog {transform: translateY(0); opacity: 1; transition: all 0.3s ease-in-out;}
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% if user.is_authenticated %}{% if user.is_staff %}{% url 'dashboard_home' %}{% else %}{% url 'shop' %}{% endif %}{% else %}{% url 'login' %}{% endif %}">
                <i class="fas fa-store"></i> E-Commerce
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    {% if user.is_authenticated and user.is_staff %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'dashboard_home' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'products_list' %}"><i class="fas fa-box"></i> Products</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'orders_list' %}"><i class="fas fa-shopping-cart"></i> Orders</a></li>
                    {% endif %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'shop' %}"><i class="fas fa-shopping-bag"></i> Shop</a></li>
                </ul>
                <ul class="navbar-nav">
                    {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-user-circle"></i> {{ user.username }}
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="{% url 'cart_page' %}"><i class="fas fa-shopping-cart"></i> My Cart</a></li>
                                <li><a class="dropdown-item" href="{% url 'profile' %}"><i class="fas fa-user"></i> Profile</a></li>
                                <li><a class="dropdown-item" href="{% url 'settings' %}"><i class="fas fa-cog"></i> Settings</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'login' %}"><i class="fas fa-sign-in-alt"></i> Login</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'signup' %}"><i class="fas fa-user-plus"></i> Sign Up</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid">
        <div class="main-container fade-in">
            {% block content %}
            <div class="row mb-4">
                <div class="col-12 d-flex justify-content-between align-items-center mb-3">
                    <h1 class="display-5 fw-bold">Recent Orders</h1>
                    <span id="clock" class="text-muted small"></span>
                </div>
                <div class="col-12 mb-3">
                    <form method="get" class="d-flex justify-content-end">
                        <select name="period" class="form-select w-auto" onchange="this.form.submit()">
                            <option value="all" {% if period == "all" %}selected{% endif %}>All</option>
                            <option value="day" {% if period == "day" %}selected{% endif %}>Today</option>
                            <option value="week" {% if period == "week" %}selected{% endif %}>This Week</option>
                            <option value="month" {% if period == "month" %}selected{% endif %}>This Month</option>
                        </select>
                    </form>
                </div>
            </div>
            {% endblock %}
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function updateClock() {
            const now = new Date();
            const options = { weekday:'short', year:'numeric', month:'short', day:'numeric', hour:'2-digit', minute:'2-digit', second:'2-digit' };
            document.getElementById('clock').textContent = now.toLocaleString('en-US', options);
        }
        setInterval(updateClock, 1000);
        updateClock();
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
